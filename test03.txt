package test01;

import java.io.*;
import java.util.*;
import java.util.stream.Collectors;

public class ReadTxt2 {
    public static List<String> rt = new ArrayList<>();
    public static void main(String[] args) throws IOException {
        List<String> rt1 = new ArrayList<>();
        Scanner r = new Scanner(System.in);
        String path = "C:\\Users\\Administrator\\Desktop\\%r";
        String in = r.nextLine();
        String[] rr = in.split(" ");
        String name = "";
        if (rr.length == 3){
            name = rr[2];
        }
        List<String> outList = new ArrayList<>();
        List<String> list = toArrayByFileReader(String.format(path,rr[0]));
        if (null != name && !"".equals(name) ){
            String finalName = name;
            List<String> finalOutList = outList;
            list.forEach(e -> {
                if (e.contains(finalName)){
                    finalOutList.add(e);
                }
            });
            String finalName1 = name;
            rt1 = rt.stream().filter(e -> e.equals(finalName1)).collect(Collectors.toList());
        }else{
            rt1 = rt;
            outList = list;
        }
        LinkedHashSet h = new LinkedHashSet(rt1);
        rt1.clear();
        rt1.addAll(h);
        writeFile(rt1, outList, String.format(path,rr[1]));
    }

    public static void writeFile(List<String> rt2, List<String> outList, String name) throws IOException {
        PrintWriter pw = new PrintWriter(new FileWriter(name));
        if (null != outList && outList.size() > 0){
            rt2.forEach(e -> {
                pw.write(e);
                pw.write("\n");
                outList.forEach(e2 ->{
                    if (e2.contains(e)) {
                        pw.write(e2.replace(e, ""));
                        pw.write("\n");
                    }
                });
            });

        }
        pw.close();
    }

    public static List<String> toArrayByFileReader(String name) {
        ArrayList<String> arrayList = new ArrayList<>();
        try {
            FileReader fr = new FileReader(name);
            BufferedReader bf = new BufferedReader(fr);
            String str;
            while ((str = bf.readLine()) != null) {
                arrayList.add(str);
                rt.add(str.substring(0,3));
            }
            bf.close();
            fr.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // ·µ»ØÊý×é
        return arrayList;
    }

}